<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<title>온라인 체스</title>

<style>
  body {
    font-family: Arial, sans-serif;
    text-align: center;
  }

  h1 {
    margin-bottom: 10px;
  }

  .controls {
    margin-bottom: 10px;
  }

  .controls input {
    padding: 6px;
    font-size: 14px;
  }

  .controls button {
    padding: 6px 10px;
    font-size: 14px;
    cursor: pointer;
  }

  #status {
    margin: 10px;
    font-weight: bold;
    height: 20px;
  }

  .board-wrapper {
    display: inline-grid;
    grid-template-columns: 30px repeat(8, 60px);
    grid-template-rows: repeat(8, 60px) 30px;
    gap: 0;
  }

  .rank {
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
  }

  .file {
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
  }

  .board {
    grid-column: 2 / 10;
    grid-row: 1 / 9;
    display: grid;
    grid-template-columns: repeat(8, 60px);
    grid-template-rows: repeat(8, 60px);
    border: 3px solid #333;
  }

  .square {
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 36px;
    cursor: pointer;
  }

  .light { background: #f0d9b5; }
  .dark { background: #b58863; }

  .selected {
    outline: 3px solid red;
  }
</style>
</head>

<body>

<h1>온라인 체스</h1>

<div class="controls">
  <button onclick="createRoom()">방 만들기 (백)</button>
  <input id="roomInput" placeholder="방 코드 입력 (흑)" />
  <button onclick="joinRoom()">입장</button>
</div>

<div id="status"></div>

<div class="board-wrapper">
  <!-- 왼쪽 숫자 -->
  <div class="rank">8</div>
  <div class="rank">7</div>
  <div class="rank">6</div>
  <div class="rank">5</div>
  <div class="rank">4</div>
  <div class="rank">3</div>
  <div class="rank">2</div>
  <div class="rank">1</div>

  <!-- 체스판 -->
  <div class="board" id="board"></div>

  <!-- 아래 알파벳 -->
  <div></div>
  <div class="file">A</div>
  <div class="file">B</div>
  <div class="file">C</div>
  <div class="file">D</div>
  <div class="file">E</div>
  <div class="file">F</div>
  <div class="file">G</div>
  <div class="file">H</div>
</div>

<script>
  const boardElement = document.getElementById("board");
  const status = document.getElementById("status");

  let selected = null;
  let turn = "white";
  let roomCode = null;

  const pieces = {
    r: "♜", n: "♞", b: "♝", q: "♛", k: "♚", p: "♟",
    R: "♖", N: "♘", B: "♗", Q: "♕", K: "♔", P: "♙"
  };

  const initialBoard = [
    "rnbqkbnr",
    "pppppppp",
    "........",
    "........",
    "........",
    "........",
    "PPPPPPPP",
    "RNBQKBNR"
  ];

  function drawBoard() {
    boardElement.innerHTML = "";
    for (let y = 0; y < 8; y++) {
      for (let x = 0; x < 8; x++) {
        const sq = document.createElement("div");
        sq.className = "square " + ((x + y) % 2 ? "dark" : "light");
        const piece = initialBoard[y][x];
        if (piece !== ".") sq.textContent = pieces[piece];
        sq.onclick = () => onSquareClick(sq);
        boardElement.appendChild(sq);
      }
    }
  }

  function onSquareClick(square) {
    if (!roomCode) return;

    if (selected) {
      selected.classList.remove("selected");
      selected = null;
      turn = turn === "white" ? "black" : "white";
      status.textContent = turn === "white" ? "백 차례" : "흑 차례";
    } else {
      selected = square;
      square.classList.add("selected");
    }
  }

  function createRoom() {
    roomCode = Math.random().toString(36).substring(2, 7).toUpperCase();
    status.textContent = `방 생성됨 (코드: ${roomCode}) - 백 차례`;
    turn = "white";
  }

  function joinRoom() {
    const input = document.getElementById("roomInput").value.trim();
    if (!input) return;
    roomCode = input.toUpperCase();
    status.textContent = `방 입장 완료 (코드: ${roomCode}) - 백 차례`;
    turn = "white";
  }

  drawBoard();
</script>

</body>
</html>
